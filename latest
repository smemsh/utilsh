#!/usr/bin/env bash4
#
# - find the latest regular file in a directory tree by mtime
# - returns the human-readable modtime of the file
#
# - todo: allow other kinds of times to be tested
# - todo: make sure this will handle filenames with newlines
# - todo: flags to print the name, the date, or both
# - todo: handle other kinds of inodes besides regular files
#

if [[ $1 =~ [[:digit:]] && $2 ]]
then howmany=$1; shift; fi

dir="$1"
test -d "$dir" || exit

find "$dir"/ -type f -printf '%TY%Tm%Td%TH%TM%TS:%p\n' \
| sort -nr -t . -k 1,2 \
| awk -F : '{print substr($1, 0, index($1, ".") - 1)}' \
| head -${howmany:-'1'}
